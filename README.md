# simple-server

> simple-serveræ˜¯ä¸€ä¸ªä½¿ç”¨NodeJSç¼–å†™çš„ç®€å•æœåŠ¡ï¼Œæ”¯æŒé™æ€èµ„æºã€è¯·æ±‚è½¬å‘ã€æ•°æ®mockã€‚éå¸¸é€‚åˆåœ¨å¼€å‘ã€æµ‹è¯•ç¯å¢ƒä½¿ç”¨ã€‚

simple-serverå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š

1. ğŸ„ é›†æˆmockæœåŠ¡ï¼ˆæœåŠ¡ç«¯æ•°æ®æ¨¡æ‹Ÿï¼‰ï¼Œå³æ”¯æŒä½¿ç”¨é™æ€JSONæ–‡ä»¶ï¼Œä¹Ÿæ”¯æŒè¿”å›JSåŠ¨æ€ç”Ÿæˆçš„æ•°æ®ï¼Œæ”¯æŒé«˜çº§æ‹“å±•ï¼ˆå¦‚æ ¹æ®å‰ç«¯ä¸Šè¡Œå‚æ•°è‡ªå®šä¹‰è¿”å›ä¸åŒç»“æœï¼‰ï¼›
2. ğŸŒ é»˜è®¤æ”¯æŒè·¨åŸŸè®¿é—®ï¼›
3. ğŸ’ª æ”¯æŒpostä¼ è¾“æœ€å¤§100Mçš„å¤§æ–‡ä»¶ï¼ˆ100Mè¶³å¤Ÿä¸€èˆ¬çš„å¼€å‘ã€æµ‹è¯•éœ€æ±‚äº†ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨nginxç­‰å…¶ä»–æœåŠ¡ä»£ç†æ—¶ï¼Œè¿™äº›æœåŠ¡æœ¬èº«ä¹Ÿæœ‰æ–‡ä»¶å¤§å°é™åˆ¶çš„ï¼Œæ²¡è®°é”™çš„è¯nginxé»˜è®¤é™åˆ¶1Mï¼Œtomcaté»˜è®¤é™åˆ¶2Mï¼Œæœ€ç»ˆèƒ½æ”¯æŒçš„å¤§å°æ˜¯ç”±æ‰€æœ‰è¿™äº›æœåŠ¡ä¸­çš„ä¸‹é™å†³å®šçš„ï¼‰ï¼›
4. ğŸ”¥ é’ˆå¯¹è¯·æ±‚è½¬å‘åœºæ™¯è¿›è¡Œäº†æ—¥å¿—ä¼˜åŒ–ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜ï¼ˆç”±äºç›®æ ‡åœºæ™¯æ˜¯è¯·æ±‚é‡ä¸å¤§çš„æµ‹è¯•æˆ–è€…å¼€å‘ç¯å¢ƒï¼Œæ‰€ä»¥æ—¥å¿—è¢«æ ¼å¼åŒ–ä¾¿äºé˜…è¯»ï¼Œè‹¥ç”¨äºç”Ÿäº§ç¯å¢ƒè¯·ç¨åŠ ä¿®æ”¹ï¼‰ã€‚
5. ğŸ‘« é›†æˆäº†PM2æ”¯æŒï¼Œåªè¦å‡ ä¸ªå‘½ä»¤å³å¯åšåˆ°å¼‚å¸¸æ—¶è‡ªå¯åŠ¨ã€é…ç½®/mockæ–‡ä»¶ä¿®æ”¹æ—¶è‡ªå¯åŠ¨ï¼Œå¼€æœºè‡ªå¯åŠ¨ï¼ˆå¼€å¯è‡ªå¯ä¸æ”¯æŒwindowç³»ç»Ÿï¼‰ï¼Œéƒ¨ç½²è¿ç»´æ–¹ä¾¿ï¼›
6. ğŸ›  å¯ä½œä¸ºé™æ€æ–‡ä»¶æœåŠ¡å™¨ã€‚
7. ğŸš€ æ”¯æŒè§£ægzipæˆ–deflateå‹ç¼©è¿‡çš„å“åº”å†…å®¹ã€‚

## æˆªå›¾

è¾“å‡ºæ—¥å¿—æˆªå›¾ï¼š

![console](./screenshots/console.png)

åº”ç”¨çŠ¶æ€æˆªå›¾ï¼ˆä½¿ç”¨pm2éƒ¨ç½²ï¼ŒAppåç§°ä¸º`simple-server-${config.port}`ï¼Œä¾¿äºçŸ¥æ‚‰å½“å‰æœåŠ¡æ‰€å ç”¨çš„ç«¯å£å·ï¼‰ï¼š

![console](./screenshots/app-status.png)

## é¡¹ç›®éƒ¨ç½²

***æœ¬é¡¹ç›®ä½¿ç”¨`pm2`è¿›è¡Œé¡¹ç›®çš„å¯åŠ¨ä¸ç»´æŠ¤ã€‚***

1ã€å®‰è£…ä¾èµ–

```bash
npm run installDependencies
```

2ã€å¯åŠ¨é¡¹ç›®

***è¯·å…ˆå°†é¡¹ç›®æ ¹ç›®å½•çš„config-example.jsæ–‡ä»¶é‡å‘½åä¸ºconfig.jsæ–‡ä»¶ï¼Œç„¶åæ ¹æ®å®é™…éœ€è¦ä¿®æ”¹å¯¹åº”é…ç½®ï¼Œç„¶åå†è¿›è¡Œåç»­æ“ä½œï¼ˆé…ç½®é¡¹ä¸­å„å‚æ•°çš„è¯´æ˜è§åæ–‡ï¼‰***

æ³¨ï¼šä»¥ä¸‹å‘½ä»¤éœ€åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼Œå…¶ä¸­éƒ¨åˆ†å‘½ä»¤å¯è§†ä¸º`pm2`å¯¹åº”å‘½ä»¤çš„åˆ«åï¼Œå¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹é€šè¿‡ç›´æ¥ä½¿ç”¨`pm2`å‘½ä»¤è¾¾æˆã€‚

```bash
# åˆæ¬¡å¯åŠ¨ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼‰
npm run start

# é‡å¯ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼‰
npm run restart
```

3ã€å¼€å¯è‡ªå¯åŠ¨

æ‰§è¡Œä¸‹è¿°å‘½ä»¤ï¼Œpm2ä¼šç»™å‡ºä¸€ä¸²è„šæœ¬å‘½ä»¤ï¼Œåœ¨ç»ˆç«¯ä¸­å¤åˆ¶ç²˜è´´è¯¥å‘½ä»¤å¹¶å›è½¦æ‰§è¡Œå³å¯ï¼ˆæœ‰æ—¶å€™ä¼šç›´æ¥æ‰§è¡ŒæˆåŠŸç„¶åå‘Šè¯‰ä½ æ‰§è¡ŒæˆåŠŸäº†ï¼Œè¿™æ—¶å€™å°±ä¸ç”¨å†å¤åˆ¶å‘½ä»¤æ‰‹åŠ¨å»æ‰§è¡Œäº†ï¼‰ã€‚

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ
npm run getShellUsedToStartProjectAfterReboot
```

4ã€æŸ¥çœ‹é¡¹ç›®æ—¥å¿—

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ
npm run log
```

5ã€åœæ­¢å’Œåˆ é™¤é¡¹ç›®

åœæ­¢é¡¹ç›®ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ
npm run stop
```

ä»PM2é¡¹ç›®æ¸…å•ä¸­åˆ é™¤é¡¹ç›®ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ
npm run delete
```

## é…ç½®æ–‡ä»¶è§„åˆ™è¯´æ˜

### è®¾ç½®æœåŠ¡ç«¯å£

ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„`config.port`å­—æ®µï¼Œé»˜è®¤å¯ç”¨ç«¯å£å·ä¸º3456ã€‚ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š

```javascript
const config = {
    // ...
    port: '3456',
    // ...
}
module.exports = config
```

### è¯·æ±‚ä»£ç†/è½¬å‘

ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„`config.proxyTable`å­—æ®µå³å¯ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š

```javascript
const config = {
    // ...
    proxyTable: {
        '/apis/proxy-test': {
            target: 'http://test.api.com',
            changeOrigin: true,
            pathRewrite (path, req) {
                return path.replace('/apis/proxy-test', '/apis/proxy')
            },
        },
        '/apis/proxy': {
            target: 'http://production.api.com',
            changeOrigin: true,
        },
    },
    // ...
}
module.exports = config
```

å¦‚ä¸Šé…ç½®å¯¹åº”çš„è§£é‡Šæè¿°å¦‚ä¸‹ï¼š

- å‘è‡³æœ¬æœåŠ¡çš„è·¯å¾„ä»¥`/apis/proxy-test`å¼€å¤´çš„è¯·æ±‚ä¼šè¢«è½¬å‘åˆ°`http://test.api.com/apis/proxy`ä¸‹ã€‚ä¾‹å¦‚ï¼Œå‘è‡³æœ¬æœåŠ¡çš„`/apis/proxy-test/v2/queryDate.do`è¯·æ±‚ä¼šè¢«è½¬å‘åˆ°`http://test.api.com/apis/proxy/v2/queryDate.do`ã€‚

- è¿™é‡Œé‡‡ç”¨â€œè¶Šå…·ä½“çš„é…ç½®ï¼Œä¼˜å…ˆçº§è¶Šé«˜â€çš„è§„åˆ™ï¼Œå³å¦‚æœæŸä¸ªè¯·æ±‚ç¬¦åˆå¤šæ¡è§„åˆ™ï¼Œå…¶ä¸­æœ€å…·ä½“çš„è§„åˆ™ä¼šç”Ÿæ•ˆã€‚å¦‚ï¼Œè‹¥åŒæ—¶é…ç½®äº†é’ˆå¯¹`/apis/proxy`å’Œ`/apis/proxy/v2`çš„è½¬å‘è§„åˆ™ï¼Œåˆ™`/apis/proxy/v2/test.do`è¯·æ±‚ä¼šä¾æ®`/apis/proxy/v2`çš„è§„åˆ™è¢«è½¬å‘ï¼Œå…¶ä»–å¦‚`/apis/proxy/v1/test.do`çš„è¯·æ±‚åˆ™ä¼šä¾æ®`/apis/proxy`çš„è§„åˆ™è¢«è½¬å‘ã€‚

è¯´æ˜ï¼šç¨‹åºä¼šè‡ªåŠ¨å¯¹ä»£ç†è¯·æ±‚è¿”å›çš„ç»“æœè¿›è¡Œå¤‡ä»½ï¼Œå¤‡ä»½ç›®å½•ä¸º/data/mock/proxyï¼Œç”Ÿæˆçš„æ–‡ä»¶åæ˜¯æ ¹æ®è¯·æ±‚åœ°å€è‡ªåŠ¨ç”Ÿæˆçš„ã€‚å¤§éƒ¨åˆ†æ—¶å€™ä¸éœ€è¦æ­ç†è¿™äº›å¤‡ä»½æ–‡ä»¶ã€‚ä½†æ˜¯å¦‚æœä½ æ­£å¥½ä¹ŸåŒæ—¶ä½¿ç”¨ç”¨æœ¬æœåŠ¡åšmockæœåŠ¡ï¼Œåˆ™å¯ä»¥æ‹·è´è¿™äº›æ–‡ä»¶ä½œä¸ºmockæ•°æ®æ–‡ä»¶ï¼Œå…·ä½“ç”¨æ³•è§åæ–‡æè¿°ã€‚

æœ¬é¡¹ç›®é’ˆå¯¹è¯·æ±‚ä»£ç†/è½¬å‘çš„åœºæ™¯ï¼Œé’ˆå¯¹æ€§çš„è¿›è¡Œäº†æ—¥å¿—è¾“å‡ºçš„ä¼˜åŒ–ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹`config.logLevel`çš„å€¼æ¥åˆ‡æ¢ä¸åŒçš„æ—¥å¿—æ‰“å°ä¸°å¯Œåº¦ï¼Œç›®å‰æ”¯æŒä»¥ä¸‹ä¸¤ä¸ªæšä¸¾å€¼ï¼š

1. `simple`ï¼šä»…æ‰“å°æ ¸å¿ƒå†…å®¹ï¼Œæ—¥å¿—é‡å°‘ï¼Œæœ‰å¯èƒ½ç¼ºå°‘æ’æŸ¥é—®é¢˜çš„å…³é”®ä¿¡æ¯ã€‚
2. `normal`: æ‰“å°å†…å®¹ä¸°å¯Œï¼Œæ’æŸ¥é—®é¢˜æ—¶ä¿¡æ¯æ›´ä¸°å¯Œï¼Œä½†ç›¸å¯¹çš„ï¼Œæ—¥å¿—é‡ä¼šå¤§å¾ˆå¤šã€‚

### è¿”å›JSONé™æ€æ•°æ®

ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„`config.jsonTable`å­—æ®µå³å¯ã€‚ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š

```javascript
const config = {
    // ...
    jsonTable: [
        '/manage2/intention/list',
        '/manage2/carInsurance/queryDetails',
        '/manage2/carInsurance/updateQuotation',
        '/manage2/order/list',
        '/manage2/order/queryDetails',
        '/manage2/order/updateSalesman',
        '/manage2/order/update'
    ],
    // ...
}
module.exports = config
```

å¦‚ä¸Šé…ç½®å¯¹åº”çš„è§£é‡Šæè¿°å¦‚ä¸‹ï¼š

è‹¥æœ‰å‘è‡³æœ¬æœåŠ¡çš„è·¯å¾„ç²¾ç¡®åŒ¹é…`/manage2/intention/list`çš„è¯·æ±‚ï¼Œåˆ™æœåŠ¡å™¨ä¼šå°†æ–‡ä»¶`/data/mock/json/manage2-intention-list.json`çš„å†…å®¹äºˆä»¥è¿”å›ã€‚

æ³¨æ„ï¼šä½ å¯ä»¥åœ¨å¯åŠ¨æœåŠ¡å™¨ä¹‹å‰ï¼Œå…ˆåœ¨`/data/mock/json`ç›®å½•ä¸‹æ‰‹åŠ¨å»ºç«‹å¯¹åº”çš„jsonæ–‡ä»¶ï¼Œå¹¶å¡«å……æ•°æ®ï¼›å¦‚æœæ‚¨æœªæå‰æ‰‹åŠ¨å»ºç«‹å¯¹åº”jsonæ–‡ä»¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨å¸®ä½ æ–°å»ºä¸€ä¸ªå†…å®¹ä¸º`{}`çš„jsonæ–‡ä»¶ï¼Œå†…å®¹è¿˜éœ€æ‚¨è‡ªè¡Œå¡«å……ã€‚ä¸€èˆ¬æ¥è¯´ç”¨åé¢è¿™ç§æ–¹æ³•ä¼šæ¯”è¾ƒæ–¹ä¾¿ï¼Œä¿®æ”¹äº†æ–‡ä»¶åç¨‹åºä¼šè‡ªåŠ¨é‡å¯çš„ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡å¯æœåŠ¡ã€‚

***å°æŠ€å·§ï¼šå¯ä»¥å°†ç¨‹åºåœ¨`/data/mock/proxy`ç›®å½•ä¸‹ç”Ÿæˆçš„å¤‡ä»½æ–‡ä»¶æ‹·è´è‡³æ­¤å¤„ä½¿ç”¨ã€‚***

### è¿”å›JSè‡ªå®šä¹‰æ•°æ®

ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„config.customTableå³å¯ã€‚ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š

```javascript
const config = {
    // ...
    customTable: [
        '/great/what'
    ],
    // ...
}
module.exports = config
```

å¦‚ä¸Šé…ç½®å¯¹åº”çš„è§£é‡Šæè¿°å¦‚ä¸‹ï¼š

è‹¥æœ‰å‘è‡³æœ¬æœåŠ¡çš„è·¯å¾„ç²¾ç¡®åŒ¹é…`/great/what`çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šå°†`/data/mock/custom/great-what.js`æ–‡ä»¶ä¸­***å¯¼å‡ºçš„å‡½æ•°***äºˆä»¥è°ƒç”¨ï¼Œå¹¶å°†***å‡½æ•°è°ƒç”¨åçš„è¿”å›å€¼***å‘é€è‡³å‰ç«¯ã€‚

æ³¨æ„ï¼šä½ å¯ä»¥åœ¨å¯åŠ¨æœåŠ¡å™¨ä¹‹å‰ï¼Œå…ˆåœ¨`/data/mock/custom`ç›®å½•ä¸‹æ‰‹åŠ¨å»ºç«‹å¯¹åº”çš„jsæ–‡ä»¶ï¼Œåœ¨è¯¥jsæ–‡ä»¶ä¸­é€šè¿‡`module.exports`å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ªjsonæ•°æ®ï¼ˆä¹Ÿå¯ä»¥è®©ç¨‹åºè‡ªåŠ¨åˆ›å»ºè¯¥æ–‡ä»¶ï¼Œç¨‹åºè‡ªåŠ¨åˆ›å»ºçš„æ–‡ä»¶ä¼šé»˜è®¤å†™å…¥`module.exports = (req) => { return {} }`æ¥ä½œä¸ºå ä½å†…å®¹ï¼‰ï¼Œè¯¥å‡½æ•°å¯æ¥æ”¶ä¸€ä¸ªè¡¨ç¤ºè¯·æ±‚çš„`req`å‚æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ ¹æ®reqæ¥åˆ¤æ–­è¯·æ±‚æ–¹å¼ã€è¯·æ±‚å¤´ã€æ¥å£ä¸Šè¡Œå‚æ•°ç­‰æ¥è¿›è¡Œè¿”å›å†…å®¹çš„é«˜çº§è‡ªå®šä¹‰ã€‚

è¯´æ˜ï¼šä¹‹æ‰€ä»¥åœ¨è‡ªå®šä¹‰jsæ–‡ä»¶ä¸­å¯¼å‡ºå‡½æ•°è€Œéç›´æ¥å¯¼å‡ºæ•°æ®ï¼Œæ˜¯ä¸ºäº†ä¾¿äºæœåŠ¡å™¨è¿”å›åŠ¨æ€å†…å®¹ã€‚

è¯´æ˜ï¼šå®‰è£…ç¨‹åºä¾èµ–æ—¶é»˜è®¤å®‰è£…äº†[mockjsæ¨¡å—](http://mockjs.com/)ï¼Œä½ å¯ä»¥åœ¨ä»£ç ä¸­requireè¯¥æ¨¡å—æ¥ç”Ÿæˆä¸€äº›åŠ¨æ€mockæ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

```javascript
const Mock = require('mockjs')

const returnRes = (req) => Mock.mock({
    // å±æ€§ list çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å«æœ‰ 1 åˆ° 10 ä¸ªå…ƒç´ 
    'list|1-10': [{
        // å±æ€§ id æ˜¯ä¸€ä¸ªè‡ªå¢æ•°ï¼Œèµ·å§‹å€¼ä¸º 1ï¼Œæ¯æ¬¡å¢ 1
        'id|+1': 1
    }],
    // åœ¨æ¥å£é‡Œè¿”å›è¯·æ±‚æ–¹å¼
    method: req.method,
    // åœ¨æ¥å£é‡Œè¿”å›å‰ç«¯ä¼ å‚
    params: (() => {
        if (req.method === 'POST') {
            return req.body
        } else if (req.method === 'GET') {
            return req.query
        }
        return 'Neither post nor get request'
    })(),
})

module.exports = returnRes
```

### è®¾ç½®é™æ€æ–‡ä»¶æœåŠ¡

å°†æ‚¨çš„å‰ç«¯æ–‡ä»¶æˆ–å…¶ä»–é™æ€æ–‡ä»¶æ”¾ç½®äº`/public`ç›®å½•ä¸‹ï¼Œç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„`config.public`ï¼Œè¯¥å€¼å°†ä¸`/public`ç›®å½•ç›´æ¥æ˜ å°„ã€‚config.publicçš„é»˜è®¤å€¼ä¸º"/test"ï¼Œå³"/test/index.html"å°†ä¼šè®¿é—®publicç›®å½•ä¸‹çš„index.htmlæ–‡ä»¶ã€‚ç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š

```javascript
const config = {
    // ...
    public: '/static',
    // ...
}
module.exports = config
```

å¦‚ä¸Šé…ç½®å¯¹åº”çš„è§£é‡Šæè¿°å¦‚ä¸‹ï¼š

å‡è®¾æˆ‘ä»¬åœ¨`/public`ç›®å½•ä¸‹å­˜æ”¾äº†`index.html`ã€`css/style.css`ã€`scripts/app.js`ç­‰æ–‡ä»¶ã€‚é‚£ä¹ˆå‘è‡³æœ¬æœåŠ¡çš„è·¯å¾„ç²¾ç¡®åŒ¹é…`/static/index.html`çš„è¯·æ±‚ï¼Œå°†è®¿é—®`/public/index.html`æ–‡ä»¶ã€‚

è¯´æ˜ï¼š

- åœ¨ä¸Šè¿°é…ç½®ä¸‹ï¼Œè¯·æ±‚`/static`å’Œè¯·æ±‚`/static/index.html`å®é™…è®¿é—®çš„æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ï¼Œå› ä¸ºç¨‹åºè®¾å®šçš„é»˜è®¤é¦–é¡µä¸º`index.html`ã€‚

### é‡å®šå‘

å¯é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„`config.redirect`å­—æ®µè®¾ç½®é‡å®šå‘è§„åˆ™ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š

```javascript
const config = {
    // ...
    redirect: {
        movedPermanently: { // 301 redirect æ°¸ä¹…é‡å®šå‘
            '/a': '/b',
        },
        movedTemporarily: { // 302 redirect ä¸´æ—¶é‡å®šå‘
            '/vendor/assets/zepto.min.js': 'http://localhost:3000/vendor/assets/zepto.min.js?v=20191122',
        },
    },
    // ...
}
module.exports = config
```

å¦‚ä¸Šé…ç½®å¯¹åº”çš„è§£é‡Šæè¿°å¦‚ä¸‹ï¼š

åœ¨ä¸Šè¿°é…ç½®è§„åˆ™ä¸‹ï¼Œå‘è‡³æœ¬æœåŠ¡çš„è·¯å¾„ç²¾ç¡®åŒ¹é…`/a`çš„è¯·æ±‚å°†è¢«301æ°¸ä¹…é‡å®šå‘åˆ°`/b`è¯·æ±‚ï¼›å‘è‡³æœ¬é™„çš„è·¯å¾„ç²¾ç¡®åŒ¹é…`/vendor/assets/zepto.min.js`çš„è¯·æ±‚å°†è¢«302ä¸´æ—¶é‡å®šå‘åˆ°`http://localhost:3000/vendor/assets/zepto.min.js?v=20191122`ã€‚

### åœ¨çº¿è®¿é—®é¡¹ç›®è¯´æ˜æ–‡æ¡£

å¯åŠ¨æœ¬æœåŠ¡åï¼Œå¯é€šè¿‡è®¿é—®`/help`æ¥è®¿é—®é¡¹ç›®è¯´æ˜æ–‡æ¡£ã€‚

## ä½¿ç”¨nginxç­‰åšåå‘ä»£ç†

å¦‚æœä½¿ç”¨nginxè¿›è¡Œä»£ç†ï¼Œåˆ™å¯èƒ½ä¸ä¼šèµ°expressçš„é™æ€æœåŠ¡ï¼Œè¿™æ—¶å€™éœ€è¦åœ¨nginxé…ç½®ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„é…ç½®ï¼ˆå‡å®šconfig.publicé…çš„æ˜¯`static`ï¼‰ï¼š

```default
location ^~ /static/ {
  allow all;
  alias /www/wwwroot/www.example.com/simple-server/public/;
}

location ^~ /screenshots/ {
  allow all;
  alias /www/wwwroot/www.example.com/simple-server/screenshots/;
}
```

ç„¶åä¸ºäº†å®‰å…¨èµ·è§ï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›simple-serverä¸‹çš„æœåŠ¡ç«¯æºç è¢«ç”¨æˆ·è®¿é—®åˆ°ï¼Œæ‰€ä»¥è¿˜éœ€è¦å¢åŠ è¿™æ ·çš„é…ç½®ï¼ˆç¤ºä¾‹é‡Œæ˜¯ç¦æ­¢è®¿é—®markdownæ–‡ä»¶å’Œjsæ–‡ä»¶ï¼Œä¸è¿‡è¿™ä¸ä¼šå½±å“ä¸Šé¢çš„é…ç½®ï¼Œå³ï¼špublicå’Œscreenshotsä¸‹é¢çš„jså’Œmarkdownæ–‡ä»¶ä¸å—å½±å“ï¼Œä»èƒ½æ­£å¸¸è®¿é—®ï¼‰ï¼š

```default
location ~* \.(js|md)$ {
  root /www/wwwroot/www.example.com/simple-server/;
  deny all;
}
```

## License/è®¸å¯

MITåè®®ã€‚å…è´¹å¼€æºï¼Œå¯ä»¥éšæ„ä½¿ç”¨ï¼Œä½†å› ä½¿ç”¨è€Œäº§ç”Ÿçš„é—®é¢˜è¯·è‡ªè¡Œè´Ÿè´£ã€‚
